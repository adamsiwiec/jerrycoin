(this.webpackJsonpjerrycoin=this.webpackJsonpjerrycoin||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},104:function(e,t){},105:function(e,t){},175:function(e,t){},183:function(e,t,n){e.exports=n.p+"static/media/ultimateJerry.7b5461f3.gif"},184:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(21),i=n.n(r),c=n(79),l=(n(99),n(100),n(101),n(11)),u=n(34),s=n(39),d=n(35),f=n(38),m=n(187),h=n(195),x=n(196),g=n(9),p=(n(102),n(36)),v=n(7),b=n(37),O=new p.ec("secp256k1"),y=function e(t,n,a,o){Object(l.a)(this,e),this.txOutId=void 0,this.txOutIndex=void 0,this.address=void 0,this.amount=void 0,this.txOutId=t,this.txOutIndex=n,this.address=a,this.amount=o},E=function e(){Object(l.a)(this,e),this.txOutId=void 0,this.txOutIndex=void 0,this.signature=void 0},I=function e(t,n){Object(l.a)(this,e),this.address=void 0,this.amount=void 0,this.address=t,this.amount=n},j=function e(){Object(l.a)(this,e),this.id=void 0,this.txIns=void 0,this.txOuts=void 0},k=function(e){var t=e.txIns.map((function(e){return e.txOutId+e.txOutIndex})).reduce((function(e,t){return e+t}),""),n=e.txOuts.map((function(e){return e.address+e.amount})).reduce((function(e,t){return e+t}),"");return b.SHA256(t+n).toString()},w=function(e,t){if(!R(e))return!1;if(k(e)!==e.id)return console.log("invalid tx id: "+e.id),!1;if(!e.txIns.map((function(n){return S(n,e,t)})).reduce((function(e,t){return e&&t}),!0))return console.log("some of the txIns are invalid in tx: "+e.id),!1;var n=e.txIns.map((function(e){return T(e,t)})).reduce((function(e,t){return e+t}),0);return e.txOuts.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0)===n||(console.log("totalTxOutValues !== totalTxInValues in tx: "+e.id),!1)},N=function(e,t){return null==e?(console.log("the first transaction in the block must be coinbase transaction"),!1):k(e)!==e.id?(console.log("invalid coinbase tx id: "+e.id),!1):1===e.txIns.length?e.txIns[0].txOutIndex!==t?(console.log("the txIn signature in coinbase tx must be the block height"),!1):1!==e.txOuts.length?(console.log("invalid number of txOuts in coinbase transaction"),!1):50===e.txOuts[0].amount||(console.log("invalid coinbase amount in coinbase transaction"),!1):void console.log("one txIn must be specified in the coinbase transaction")},S=function(e,t,n){var a=n.find((function(t){return t.txOutId===e.txOutId&&t.txOutIndex===e.txOutIndex}));if(null==a)return console.log("referenced txOut not found: "+JSON.stringify(e)),!1;var o=a.address;return!!O.keyFromPublic(o,"hex").verify(t.id,e.signature)||(console.log("invalid txIn signature: %s txId: %s address: %s",e.signature,t.id,a.address),!1)},T=function(e,t){return C(e.txOutId,e.txOutIndex,t).amount},C=function(e,t,n){return n.find((function(n){return n.txOutId===e&&n.txOutIndex===t}))},J=function(e,t){var n=new j,a=new E;return a.signature="",a.txOutId="",a.txOutIndex=t,n.txIns=[a],n.txOuts=[new I(e,50)],n.id=k(n),n},P=function(e,t,n){return function(e,t,n){var a=e[0];return N(a,n)?e.slice(1).map((function(e){return w(e,t)})).reduce((function(e,t){return e&&t}),!0):(console.log("invalid coinbase transaction: "+JSON.stringify(a)),!1)}(e,t,n)?function(e,t){var n=e.map((function(e){return e.txOuts.map((function(t,n){return new y(e.id,n,t.address,t.amount)}))})).reduce((function(e,t){return e.concat(t)}),[]),a=e.map((function(e){return e.txIns})).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return new y(e.txOutId,e.txOutIndex,"",0)}));return t.filter((function(e){return!C(e.txOutId,e.txOutIndex,a)})).concat(n)}(e,t):(console.log("invalid block transactions"),null)},A=function(e){return Array.from(e,(function(e){return("0"+(255&e).toString(16)).slice(-2)})).join("")},F=function(e){return O.keyFromPrivate(e,"hex").getPublic().encode("hex")},H=function(e){return null==e?(console.log("txIn is null"),!1):"string"!==typeof e.signature?(console.log("invalid signature type in txIn"),!1):"string"!==typeof e.txOutId?(console.log("invalid txOutId type in txIn"),!1):"number"===typeof e.txOutIndex||(console.log("invalid txOutIndex type in txIn"),!1)},B=function(e){return null==e?(console.log("txOut is null"),!1):"string"!==typeof e.address?(console.log("invalid address type in txOut"),!1):D(e.address)?"number"===typeof e.amount||(console.log("invalid amount type in txOut"),!1):(console.log("invalid TxOut address"),!1)},R=function(e){return"string"!==typeof e.id?(console.log("transactionId missing"),!1):e.txIns instanceof Array?!!e.txIns.map(H).reduce((function(e,t){return e&&t}),!0)&&(e.txOuts instanceof Array?!!e.txOuts.map(B).reduce((function(e,t){return e&&t}),!0):(console.log("invalid txIns type in transaction"),!1)):(console.log("invalid txIns type in transaction"),!1)},D=function(e){return 130!==e.length?(console.log(e),console.log("invalid public key length"),!0):null===e.match("^[a-fA-F0-9]+$")?(console.log("public key must contain only hex characters"),!1):!!e.startsWith("04")||(console.log("public key must start with 04"),!1)},U=n(80),G=n.n(U),K=new p.ec("secp256k1"),M=function(){var e=G.a.get("jerry");return console.log(e),e},W=function(){var e=M(),t=K.keyFromPrivate(e,"hex");return console.log(t.getPublic()),t.getPublic().encode("hex")},V=function(){return K.genKeyPair().getPrivate().toString(16)},q=function(e,t){return v.filter(t,(function(t){return t.address===e}))},z=function(e,t,n,a,o){console.log("txPool: %s",JSON.stringify(o));var r=F(n),i=function(e,t){var n=0,a=[],o=!0,r=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value;if(a.push(u),(n+=u.amount)>=e)return{includedUnspentTxOuts:a,leftOverAmount:n-e}}}catch(d){r=!0,i=d}finally{try{o||null==l.return||l.return()}finally{if(r)throw i}}var s="Cannot create transaction from the available unspent transaction outputs. Required amount:"+e+". Available unspentTxOuts:"+JSON.stringify(t);throw Error(s)}(t,function(e,t){var n=v(t).map((function(e){return e.txIns})).flatten().value(),a=[],o=!0,r=!1,i=void 0;try{for(var c,l=function(){var e=c.value;void 0===v.find(n,(function(t){return t.txOutIndex===e.txOutIndex&&t.txOutId===e.txOutId}))||a.push(e)},u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)l()}catch(s){r=!0,i=s}finally{try{o||null==u.return||u.return()}finally{if(r)throw i}}return v.without.apply(v,[e].concat(a))}(a.filter((function(e){return e.address===r})),o)),c=i.includedUnspentTxOuts,l=i.leftOverAmount,u=c.map((function(e){var t=new E;return t.txOutId=e.txOutId,t.txOutIndex=e.txOutIndex,t})),s=new j;return s.txIns=u,s.txOuts=function(e,t,n,a){var o=new I(e,n);return 0===a?[o]:[o,new I(t,a)]}(e,r,t,l),s.id=k(s),s.txIns=s.txIns.map((function(e,t){return e.signature=function(e,t,n,a){var o=e.txIns[t],r=e.id,i=C(o.txOutId,o.txOutIndex,a);if(null==i)throw console.log("could not find referenced txOut"),Error();var c=i.address;if(F(n)!==c)throw console.log("trying to sign an input with private key that does not match the address that is referenced in txIn"),Error();var l=O.keyFromPrivate(n,"hex");return A(l.sign(r).toDER())}(s,t,n,a),e})),s},L=[],Y=function(){return v.cloneDeep(L)},$=function(e){L=e},_=function(e,t){if(!w(e,t))throw Error("Trying to add invalid tx to pool");if(!Z(e,L))throw Error("Trying to add invalid tx to pool");console.log("adding to txPool: %s",JSON.stringify(e)),L.push(e)},Q=function(e,t){return void 0!==t.find((function(t){return t.txOutId===e.txOutId&&t.txOutIndex===e.txOutIndex}))},X=function(e){var t=[],n=!0,a=!1,o=void 0;try{for(var r,i=L[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var c=r.value,l=!0,u=!1,s=void 0;try{for(var d,f=c.txIns[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var m=d.value;if(!Q(m,e)){t.push(c);break}}}catch(h){u=!0,s=h}finally{try{l||null==f.return||f.return()}finally{if(u)throw s}}}}catch(h){a=!0,o=h}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}t.length>0&&(console.log("removing the following transactions from txPool: %s",JSON.stringify(t)),L=v.without.apply(v,[L].concat(t)))},Z=function(e,t){var n=v(t).map((function(e){return e.txIns})).flatten().value(),a=function(e,t){return v.find(n,(function(e){return t.txOutIndex===e.txOutIndex&&t.txOutId===e.txOutId}))},o=!0,r=!1,i=void 0;try{for(var c,l=e.txIns[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){if(a(0,c.value))return console.log("txIn already found in the txPool"),!1}}catch(u){r=!0,i=u}finally{try{o||null==l.return||l.return()}finally{if(r)throw i}}return!0},ee=function e(t,n,a,o,r,i,c){Object(l.a)(this,e),this.index=void 0,this.hash=void 0,this.previousHash=void 0,this.timestamp=void 0,this.data=void 0,this.difficulty=void 0,this.nonce=void 0,this.index=t,this.previousHash=a,this.timestamp=o,this.data=r,this.hash=n,this.difficulty=i,this.nonce=c},te=new ee(0,"91a73664bc84c0baa1fc75ea6e4aa6d1d20c5df664c724e3159aefc2e1186627","",1465154705,[{txIns:[{signature:"",txOutId:"",txOutIndex:0}],txOuts:[{address:"04bfcab8722991ae774db48f934ca79cfb7dd991229153b9f732ba5334aafcd8e7266e47076996b55a14bf9913ee3145ce0cfc1372ada8ada74bd287450313534a",amount:50}],id:"e655f6a5f26dc9b4cac6e46f52336428287759cf81ef5ff10854f69d68f43fa3"}],0,0),ne=[te],ae=P(ne[0].data,[],0),oe=function(){return ne},re=function(){return v.cloneDeep(ae)},ie=function(e){console.log("replacing unspentTxouts with: %s",e),ae=e},ce=function(){return ne[ne.length-1]},le=function(e,t){var n=t[ne.length-5],a=e.timestamp-n.timestamp;return a<25?n.difficulty+1:a>100&&n.difficulty?n.difficulty-1:n.difficulty},ue=function(){return Math.round((new Date).getTime()/1e3)},se=function(e){var t=ce(),n=function(e){var t=e[ne.length-1];return t.index%5===0&&0!==t.index?le(t,e):t.difficulty}(oe()),a=t.index+1,o=ue(),r=fe(a,t.hash,o,e,n);return je(r)?r:null},de=function(){var e=[J(W(),ce().index+1)].concat(Y());return se(e)},fe=function(e,t,n,a,o){for(var r=0;;){var i=xe(e,t,n,a,o,r);if(Ee(i,o))return new ee(e,i,t,n,a,o,r);r++}},me=function(){return e=W(),t=re(),v(q(e,t)).map((function(e){return e.amount})).sum();var e,t},he=function(e,t){var n=z(e,t,M(),re(),Y());return _(n,re()),n},xe=function(e,t,n,a,o,r){return b.SHA256(e+t+n+a+o+r).toString()},ge=function(e){return"number"===typeof e.index&&"string"===typeof e.hash&&"string"===typeof e.previousHash&&"number"===typeof e.timestamp&&"object"===typeof e.data},pe=function(e,t){return ge(e)?t.index+1!==e.index?(console.log("invalid index"),!1):t.hash!==e.previousHash?(console.log("invalid previoushash"),!1):be(e,t)?!!Oe(e):(console.log("invalid timestamp"),!1):(console.log("invalid block structure: %s",JSON.stringify(e)),!1)},ve=function(e){return e.map((function(e){return e.difficulty})).map((function(e){return Math.pow(2,e)})).reduce((function(e,t){return e+t}))},be=function(e,t){return t.timestamp-60<e.timestamp&&e.timestamp-60<ue()},Oe=function(e){return ye(e)?(Ee(e.hash,e.difficulty)||console.log("block difficulty not satisfied. Expected: "+e.difficulty+"got: "+e.hash),!0):(console.log("invalid hash, got:"+e.hash),!1)},ye=function(e){return function(e){return xe(e.index,e.previousHash,e.timestamp,e.data,e.difficulty,e.nonce)}(e)===e.hash},Ee=function(e,t){var n=function(e){for(var t="",n={0:"0000",1:"0001",2:"0010",3:"0011",4:"0100",5:"0101",6:"0110",7:"0111",8:"1000",9:"1001",a:"1010",b:"1011",c:"1100",d:"1101",e:"1110",f:"1111"},a=0;a<e.length;a+=1){if(!n[e[a]])return null;t+=n[e[a]]}return t}(e),a="0".repeat(t);return n.startsWith(a)},Ie=function(e){console.log("isValidChain:"),console.log(JSON.stringify(e));var t;if(t=e[0],JSON.stringify(t)!==JSON.stringify(te))return null;for(var n=[],a=0;a<e.length;a++){var o=e[a];if(0!==a&&!pe(e[a],e[a-1]))return null;if(null===(n=P(o.data,n,o.index)))return console.log("invalid transactions in blockchain"),null}return n},je=function(e){if(pe(e,ce())){var t=P(e.data,re(),e.index);return null===t?(console.log("block is not valid in terms of transactions"),!1):(ne.push(e),ie(t),X(ae),!0)}return!1},ke=n(86),we=function(e){if(0!==e.length){var t=e[e.length-1];if(ge(t)){var n=ce();t.index>n.index?(console.log("blockchain possibly behind. We got: "+n.index+" Peer got: "+t.index),n.hash===t.previousHash?je(t):1===e.length?console.log("We have to query the chain from our peer"):(console.log("Received blockchain is longer than current blockchain"),function(e){var t=Ie(e);null!==t&&ve(e)>ve(oe())?(console.log("Received blockchain is valid. Replacing current blockchain with received blockchain"),ne=e,ie(t),X(ae)):console.log("Received blockchain invalid")}(e))):console.log("received blockchain is not longer than received blockchain. Do nothing")}else console.log("block structuture not valid")}else console.log("received block chain size of 0")},Ne=n(188),Se=n(189),Te=n(190),Ce=n(191),Je=n(192),Pe=n(193),Ae=n(194),Fe=n(197),He=n(84),Be=n(81),Re=n(24),De=n(83),Ue=n.n(De);var Ge=function(){var e=Object(Be.a)("https://jerry-server.herokuapp.com",{transports:["websocket"]}),t=Object(g.a)(e,1)[0],r=Object(a.useState)(!0),i=Object(g.a)(r,2),c=i[0],l=i[1],u=Object(ke.a)(["jerry"]),s=Object(g.a)(u,3),d=s[0],f=s[1],p=s[2],v=Object(a.useState)(""),b=Object(g.a)(v,2),O=b[0],y=b[1],E=Object(a.useState)(0),I=Object(g.a)(E,2),j=I[0],k=I[1],w=Object(a.useState)(""),N=Object(g.a)(w,2),S=N[0],T=N[1],C=Object(a.useState)(0),J=Object(g.a)(C,2),P=J[0],A=J[1],F=Object(a.useState)(""),H=Object(g.a)(F,2),B=H[0],R=H[1],D=Object(a.useState)(""),U=Object(g.a)(D,2),G=U[0],K=U[1],M=Object(a.useState)([]),q=Object(g.a)(M,2),z=q[0],L=q[1],Y=Object(Re.c)(),_=Object(a.useCallback)((function(){k(me())}),[k]),Q=Object(a.useCallback)((function(e){Y.show("Got New Block #"+e.length),console.log(e),we(e),_()}),[Y,_]),X=Object(a.useCallback)((function(e){console.log(e),Y.show("Got New Transaction Pool"),$(e)}),[Y]);return t.connect(),Object(a.useEffect)((function(){if(void 0===d.jerry){var e=V();console.log("making key",e),f("jerry",e),y(W())}else console.log(d.jerry),y(W());c&&""!==B&&(console.log("running first"),t.emit("getTxPool"),t.emit("getBlockchain"),t.emit("setUser",{username:B,publicKey:O}),l(!1),t.on("resTxPool",(function(e){console.log("got pool:",e),X(e)})),t.on("resBlockchain",(function(e){console.log("got bc:",e),Q(e)})),t.on("tx",(function(e){console.log("got pool:",e),X(e)})),t.on("bc",(function(e){console.log("got bc:",e),Q(e)})),t.on("users",(function(e){console.log(e),e=e.filter((function(e){return e.username!==B})),Y.show("New User Joined"),console.log(e),L(e)})),t.on("userLeft",(function(e){console.log(e),e.users=e.users.filter((function(e){return e.username!==B})),Y.show("user "+e.left+" left"),console.log(e.users),L(e.users)})))}),[d,O,c,k,y,p,f,Q,X,t,B,Y]),o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null,o.a.createElement(Ne.a,null,o.a.createElement(Se.a,{src:n(183)}),o.a.createElement(Te.a,null,o.a.createElement("h1",{className:"display-3"}," JerryCoin "),o.a.createElement("h6",{className:"lead"},"This is JerryCoin, a decentralized, consensus-based cryptocurrency, based right here on the web."))),o.a.createElement("hr",{className:"my-2"}),""===B&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Ce.a,null,o.a.createElement(Je.a,{type:"text",onChange:function(e){K(e.target.value)}}),o.a.createElement(Pe.a,{addonType:"append"},o.a.createElement(Ae.a,{onClick:function(){R(G)}},"Set Username")))),""!==B&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Ne.a,null,o.a.createElement("h6",{className:"lead"}," Public Key: ",O," ")),o.a.createElement("br",null),o.a.createElement(Ne.a,null,o.a.createElement("h6",{className:"lead"},"Balance: ",j," ")),o.a.createElement("br",null),o.a.createElement(h.a,null,o.a.createElement(x.a,{md:"3"},o.a.createElement(Fe.a,null,o.a.createElement("p",{classnames:"text-white"}," Send Address "))),o.a.createElement(x.a,{md:"9"})),o.a.createElement(Ce.a,null,o.a.createElement(Pe.a,{addonType:"prepend"},o.a.createElement(He.a,null,"@")),o.a.createElement(Je.a,{type:"text",value:S,placeholder:"04234adfasdfae9342...",onChange:function(e){return T(e.target.value)}})),o.a.createElement("br",null),o.a.createElement(h.a,null,o.a.createElement(x.a,{md:"2"},o.a.createElement(Fe.a,null,o.a.createElement("p",{classnames:"text-white"}," Amount To Send "))),o.a.createElement(x.a,{md:"10"})),o.a.createElement(Ce.a,null,o.a.createElement(Pe.a,null,o.a.createElement(He.a,null,"\u20b5")),o.a.createElement(Je.a,{value:P,onChange:function(e){var t;t=""===e.target.value?0:parseInt(e.target.value),A(t)}}),o.a.createElement(Pe.a,{addonType:"append"},o.a.createElement(Ae.a,{onClick:function(){var e;try{e=he(S,P),t.emit("sendTx",e)}catch(n){console.log(n),Y.error("You dont have enough coins")}}},"Send JC"))),o.a.createElement(h.a,null,o.a.createElement(x.a,{className:"my-3",md:"6"},o.a.createElement(Ue.a,{value:O})),o.a.createElement(x.a,{className:"my-3",md:"6"},o.a.createElement(Ae.a,{onClick:function(){de(),k(me()),t.emit("sendBlockchain",oe())}},"Generate Block"))),o.a.createElement("ul",null,z.map((function(e){return o.a.createElement(Ne.a,{onClick:function(){T(e.publicKey)}},o.a.createElement("h6",null," ",e.username," "))}))))))},Ke=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"position-relative"},o.a.createElement("section",{className:"section section-lg section-hero section-shaped"},o.a.createElement("div",{className:"shape shape-style-1 shape-default"},o.a.createElement("span",{className:"span-100"}),o.a.createElement("span",{className:"span-100"}),o.a.createElement("span",{className:"span-100"}),o.a.createElement("span",{className:"span-100"}),o.a.createElement("span",{className:"span-100"}),o.a.createElement("span",{className:"span-100"}),o.a.createElement("span",{className:"span-100"}),o.a.createElement("span",{className:"span-75"}),o.a.createElement("span",{className:"span-50"}),o.a.createElement("span",{className:"span-100"}),o.a.createElement("span",{className:"span-50"}),o.a.createElement("span",{className:"span-100"})),o.a.createElement(m.a,{className:"shape-container d-flex align-items-center "},o.a.createElement("div",{className:"col px-0"},o.a.createElement(h.a,{className:"align-items-center justify-content-center"},o.a.createElement(x.a,{className:"text-center",lg:"8"},o.a.createElement(Ge,null))))))))}}]),t}(o.a.Component),Me=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,this.refs.main.scrollTop=0}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("main",{ref:"main"},o.a.createElement(Ke,null)))}}]),t}(o.a.Component),We=n(85),Ve={timeout:1500,position:Re.b.BOTTOM_RIGHT};i.a.render(o.a.createElement(Re.a,Object.assign({template:We.a},Ve),o.a.createElement(c.Helmet,null,o.a.createElement("title",null,"JerryCoin")),o.a.createElement(Me,null)),document.getElementById("root"))},88:function(e,t,n){e.exports=n(184)},99:function(e,t,n){}},[[88,1,2]]]);
//# sourceMappingURL=main.7dc25a22.chunk.js.map